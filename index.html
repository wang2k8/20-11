<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>3D Parallax Fullscreen - Nền Trắng</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            height: 100%;
            background: #fff; /* NỀN TRẮNG */
            overflow: hidden;
        }
        .wrapper {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            perspective: 1000px;
        }
        .container {
            position: absolute;
            top: 50%; left: 50%;
            width: 100vmax;
            height: 100vmax;
            transform: translate(-50%, -50%);
        }
        img {
            position: absolute;
            top: 50%; left: 50%;
            width: 100vmax;
            height: 100vmax;
            object-fit: cover;
            transform: translate(-50%, -50%);
            pointer-events: none;
            user-select: none;
            transition: transform 0.08s ease-out;
        }
        #img1 { z-index: 5; }
        #img2 { z-index: 4; }
        #img3 { z-index: 3; }
        #img4 { z-index: 2; }
        #img5 { z-index: 1; }

        /* ĐIỆN THOẠI DỌC → XOAY 90° + FULL MÀN HÌNH */
        @media (orientation: portrait) and (max-width: 768px) {
            html, body {
                height: 100vw;
                width: 100vh;
            }
            .wrapper {
                transform: rotate(90deg);
                transform-origin: center;
                width: 100vh;
                height: 100vw;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container">
            <img id="img5" src="img1.png" alt="bg">
            <img id="img4" src="img2.png" alt="4">
            <img id="img3" src="img3.png" alt="3">
            <img id="img2" src="img4.png" alt="2">
            <img id="img1" src="img5.png" alt="fg">
        </div>
    </div>

    <script>
        const layers = [
            { el: document.getElementById('img1'), speed: 0.1 },
            { el: document.getElementById('img2'), speed: 0.3 },
            { el: document.getElementById('img3'), speed: 0.55 },
            { el: document.getElementById('img4'), speed: 0.8 },
            { el: document.getElementById('img5'), speed: 1.0 }
        ];

        const maxMove = 80;
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        if (isMobile) {
            window.addEventListener('deviceorientation', e => {
                if (!e.gamma) return;
                let x = e.gamma;  // -90 -> 90
                let y = e.beta;   // -180 -> 180
                if (y > 90) y = 90;
                if (y < -90) y = -90;
                move(x * 2.5, y * 2.5);
            });
        } else {
            document.addEventListener('mousemove', e => {
                const x = (e.clientX / window.innerWidth - 0.5) * 2;
                const y = (e.clientY / window.innerHeight - 0.5) * 2;
                move(x * 55, y * 55);
            });
        }

        function move(deltaX, deltaY) {
            layers.forEach(layer => {
                const moveX = Math.tanh(deltaX * layer.speed / maxMove) * maxMove;
                const moveY = Math.tanh(deltaY * layer.speed / maxMove) * maxMove;
                const rotateY = deltaX * 0.12;
                const rotateX = -deltaY * 0.08;

                layer.el.style.transform = 
                    `translate(-50%, -50%) translate(${moveX}px, ${moveY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
            });
        }

        // Reset khi resize (rất quan trọng trên mobile)
        window.addEventListener('resize', () => setTimeout(() => move(0,0), 300));
        move(0, 0);
    </script>
</body>
</html>
